(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d820f0c"],{"8b8c":function(e,t,n){"use strict";var r=n("0c6d");t["a"]={fetchArticleCommentList:function(e){return r["a"].get("/articles/".concat(e,"/comments"))},fetchAllCommentList:function(){return r["a"].get("/comments")},deleteOne:function(e){return r["a"].delete("/comments/".concat(e))},deleteMany:function(e){return r["a"].delete("/comments",{params:e})}}},a322:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("panel",{},[n("div",{staticClass:"header"},[n("el-button",{attrs:{type:"danger"},on:{click:e.sectionDelete}},[e._v("批量删除")])],1),n("el-table",{attrs:{data:e.dataList,border:""},on:{"selection-change":e.onSectionChange}},[n("el-table-column",{attrs:{type:"selection"}}),n("el-table-column",{attrs:{label:"ID",prop:"id"}}),n("el-table-column",{attrs:{label:"评论内容"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[n("cell-popover",{attrs:{content:t.content}})]}}])}),n("el-table-column",{attrs:{label:"文章标题","show-overflow-tooltip":"",prop:"article.title"}}),n("el-table-column",{attrs:{label:"文章是否发布"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.article?n("span",{style:{color:r.article.isPublished?"green":"red"}},[e._v(e._s(r.article.isPublished?"已发布":"未发布"))]):e._e()]}}])}),n("el-table-column",{attrs:{label:"点赞数",prop:"thumbupCount"}}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row,a=t.$index;return[n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.deleteOne(r.id,a)}}},[e._v("删除")])]}}])})],1)],1)},a=[],c=(n("ac6a"),n("96cf"),n("3b8d")),s=n("8b8c"),i={data:function(){return{dataList:[],selectedList:[]}},created:function(){var e=this,t=this.$route.params.articleID,n=t?s["a"].fetchArticleCommentList(t):s["a"].fetchAllCommentList();n.then((function(t){e.dataList=t})).catch((function(t){e.$message.error(t.message)}))},methods:{sectionDelete:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.selectedList.length){e.next=3;break}return this.$message.warning("请勾选您要删除的选项"),e.abrupt("return");case 3:return e.prev=3,e.next=6,this.$confirm("您选中的评论以经删除将无法恢复，是否删除?","提示",{type:"warning"});case 6:e.next=11;break;case 8:return e.prev=8,e.t0=e["catch"](3),e.abrupt("return");case 11:return t=this.selectedList.map((function(e){return e.id})),e.abrupt("return",s["a"].deleteMany({idList:t}).then((function(){n.selectedList.forEach((function(e){var t=n.dataList.indexOf(e);t>-1&&n.dataList.splice(t,1)}))})).catch((function(e){Promise.reject(e)})));case 13:case"end":return e.stop()}}),e,this,[[3,8]])})));function t(){return e.apply(this,arguments)}return t}(),onSectionChange:function(e){this.selectedList=e},deleteOne:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,n){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$confirm("此评论以经删除将无法恢复，是否确定？","提示",{type:"warning"});case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e["catch"](0),e.abrupt("return");case 8:s["a"].deleteOne(t).then((function(){r.$message.success("删除成功"),r.dataList.splice(n,1)})).catch((function(e){r.$message.error(e.message)}));case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t,n){return e.apply(this,arguments)}return t}()}},o=i,l=n("2877"),u=Object(l["a"])(o,r,a,!1,null,null,null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d820f0c.7b6cbc7c.js.map