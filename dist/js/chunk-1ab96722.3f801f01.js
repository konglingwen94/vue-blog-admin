(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ab96722"],{"284f":function(e,r,s){"use strict";var a=s("884f"),n=s.n(a);n.a},3786:function(e,r,s){"use strict";var a=s("0c6d");r["a"]={login:function(e){return a["a"].post("/auth/login",e)},changePassword:function(e,r){return a["a"].patch("/accounts/".concat(e,"/change-password"),r)},updateAccount:function(e,r){return a["a"].patch("/accounts/".concat(e),r)}}},"63c6":function(e,r,s){"use strict";s.r(r);var a=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{},[s("div",{staticClass:"password-container"},[s("el-card",[s("el-form",[s("el-form-item",{attrs:{label:"原密码"}},[s("el-input",{attrs:{minlength:6,clearable:""},model:{value:e.form.oldPassword,callback:function(r){e.$set(e.form,"oldPassword",r)},expression:"form.oldPassword"}})],1),s("el-form-item",{attrs:{label:"新密码"}},[s("el-input",{attrs:{minlength:6,clearable:""},model:{value:e.form.newPassword,callback:function(r){e.$set(e.form,"newPassword",r)},expression:"form.newPassword"}})],1),s("el-form-item",{attrs:{label:"确认密码"}},[s("el-input",{attrs:{clearable:""},model:{value:e.form.checkPassword,callback:function(r){e.$set(e.form,"checkPassword",r)},expression:"form.checkPassword"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.savePassHandle}},[e._v("保存")])],1)],1)],1)],1),s("el-card",[s("el-form",[s("el-form-item",{attrs:{label:"用户名"}},[s("el-input",{attrs:{clearable:""},model:{value:e.userForm.username,callback:function(r){e.$set(e.userForm,"username",r)},expression:"userForm.username"}})],1),s("el-form-item",{attrs:{label:"昵称"}},[s("el-input",{attrs:{clearable:""},model:{value:e.userForm.nickname,callback:function(r){e.$set(e.userForm,"nickname",r)},expression:"userForm.nickname"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.saveUserInfoHandle}},[e._v("保存")])],1)],1)],1)],1)},n=[],t=s("3786"),o={data:function(){return{form:{oldPassword:"",newPassword:"",checkPassword:""},userForm:{nickname:"",username:""}}},created:function(){try{var e=JSON.parse(localStorage.adminInfo)}catch(r){return}_.assign(this.userForm,_.pick(e,["username","nickname"]))},methods:{saveUserInfoHandle:function(){var e=this,r=this.userForm,s=r.nickname,a=r.username;if(a)if(s){try{var n=JSON.parse(localStorage.adminInfo)}catch(c){return}var o={username:a,nickname:s};t["a"].updateAccount(n.id,o).then((function(){e.$message.success("账户修改成功"),document.getElementById("nickname").innerHTML=s,localStorage.setItem("adminInfo",JSON.stringify(_.assign(n,o)))})).catch((function(r){e.$message.error(r.message)}))}else this.$message.error("请输入昵称");else this.$message.error("请输入用户名")},savePassHandle:function(){var e=this,r=this.form,s=r.oldPassword,a=r.newPassword,n=r.checkPassword;if(s)if(s.length<6)this.$message.error("原密码长度不得小于六位");else if(a)if(s.length<6)this.$message.error("请输入大于六位的新密码");else if(n)if(n===a){try{var o=JSON.parse(localStorage.adminInfo),c=o.id}catch(i){return}var l={oldPassword:s,newPassword:a};t["a"].changePassword(c,l).then((function(){for(var r in e.$message.success("密码修改成功"),e.form)e.form.hasOwnProperty(r)&&(e.form[r]="")})).catch((function(r){e.$message.error(r.message)}))}else this.$message.error("两次输入密码不一致");else this.$message.error("请再次输入密码");else this.$message.error("请输入新密码");else this.$message.error("请输入原密码")}}},c=o,l=(s("284f"),s("2877")),i=Object(l["a"])(c,a,n,!1,null,"6a7c9aa6",null);r["default"]=i.exports},"884f":function(e,r,s){}}]);
//# sourceMappingURL=chunk-1ab96722.3f801f01.js.map