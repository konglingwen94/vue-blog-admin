{"version":3,"sources":["webpack:///./src/api/comments.js","webpack:///./src/views/Comment/List.vue?fbdb","webpack:///src/views/Comment/List.vue","webpack:///./src/views/Comment/List.vue?c305","webpack:///./src/views/Comment/List.vue"],"names":["fetchArticleCommentList","articleID","request","get","fetchAllCommentList","deleteOne","id","delete","deleteMany","params","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","sectionDelete","_v","dataList","onSectionChange","scopedSlots","_u","key","fn","ref","row","content","style","color","article","isPublished","_s","_e","$index","$event","staticRenderFns","data","selectedList","created","action","methods","selection","component"],"mappings":"kHAAA,gBAEe,QACbA,wBADa,SACWC,GACtB,OAAOC,OAAQC,IAAR,oBAAyBF,EAAzB,eAETG,oBAJa,WAKX,OAAOF,OAAQC,IAAI,cAErBE,UAPa,SAOHC,GACR,OAAOJ,OAAQK,OAAR,oBAA4BD,KAErCE,WAVa,SAUFC,GACT,OAAOP,OAAQK,OAAO,YAAa,CAAEE,c,yCCbzC,IAAIC,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAAQ,GAAG,CAACA,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,UAAUC,GAAG,CAAC,MAAQR,EAAIS,gBAAgB,CAACT,EAAIU,GAAG,WAAW,GAAGN,EAAG,WAAW,CAACG,MAAM,CAAC,KAAOP,EAAIW,SAAS,OAAS,IAAIH,GAAG,CAAC,mBAAmBR,EAAIY,kBAAkB,CAACR,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,eAAeH,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,KAAK,KAAO,QAAQH,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,QAAQM,YAAYb,EAAIc,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAC3hB,IAAIC,EAAMD,EAAIC,IACd,MAAO,CAACd,EAAG,eAAe,CAACG,MAAM,CAAC,QAAUW,EAAIC,kBAAkBf,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,OAAO,wBAAwB,GAAG,KAAO,mBAAmBH,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,UAAUM,YAAYb,EAAIc,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GACjQ,IAAIC,EAAMD,EAAIC,IACd,MAAO,CAAEA,EAAW,QAAEd,EAAG,OAAO,CAACgB,MAAM,CAAEC,MAAMH,EAAII,QAAQC,YAAY,QAAQ,QAAS,CAACvB,EAAIU,GAAGV,EAAIwB,GAAGN,EAAII,QAAQC,YAAY,MAAM,UAAUvB,EAAIyB,YAAYrB,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,MAAM,KAAO,kBAAkBH,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,MAAMM,YAAYb,EAAIc,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAC7T,IAAIC,EAAMD,EAAIC,IACVQ,EAAST,EAAIS,OACjB,MAAO,CAACtB,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,SAAS,KAAO,SAASC,GAAG,CAAC,MAAQ,SAASmB,GAAQ,OAAO3B,EAAIN,UAAUwB,EAAIvB,GAAG+B,MAAW,CAAC1B,EAAIU,GAAG,gBAAgB,IAAI,IAC3JkB,EAAkB,G,8CCoBtB,GACEC,KADF,WAEI,MAAO,CACLlB,SAAU,GACVmB,aAAc,KAGlBC,QAPF,WAOA,WACA,+BAEA,IACA,kCACA,6BAEIC,EACJ,kBACM,EAAN,cAEA,mBACM,EAAN,8BAGEC,QAAS,CACP,cADJ,uKAEA,yBAFA,uBAGA,oCAHA,mDAQA,cACA,wBACA,KACA,kBAXA,mGAiBA,oDAjBA,kBAkBA,8BACA,iBAEA,oCACA,4BACA,MACA,6BAIA,mBACA,sBA7BA,iHAgCIrB,gBAhCJ,SAgCA,GACMX,KAAK6B,aAAeI,GAEtB,UAnCJ,oEAmCA,KAnCA,qHAqCA,yCACA,iBAtCA,0FA2CA,oBACA,iBACA,2BACA,0BAEA,mBACA,+BAjDA,qHClD6V,I,YCOzVC,EAAY,eACd,EACApC,EACA6B,GACA,EACA,KACA,KACA,MAIa,aAAAO,E","file":"js/chunk-2d820f0c.33d8ee69.js","sourcesContent":["import request from './request'\n\nexport default {\n  fetchArticleCommentList(articleID) {\n    return request.get(`/articles/${articleID}/comments`)\n  },\n  fetchAllCommentList() {\n    return request.get('/comments')\n  },\n  deleteOne(id) {\n    return request.delete(`/comments/${id}`)\n  },\n  deleteMany(params) {\n    return request.delete('/comments', { params })\n  },\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('panel',{},[_c('div',{staticClass:\"header\"},[_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":_vm.sectionDelete}},[_vm._v(\"批量删除\")])],1),_c('el-table',{attrs:{\"data\":_vm.dataList,\"border\":\"\"},on:{\"selection-change\":_vm.onSectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\"}}),_c('el-table-column',{attrs:{\"label\":\"ID\",\"prop\":\"id\"}}),_c('el-table-column',{attrs:{\"label\":\"评论内容\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('cell-popover',{attrs:{\"content\":row.content}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"文章标题\",\"show-overflow-tooltip\":\"\",\"prop\":\"article.title\"}}),_c('el-table-column',{attrs:{\"label\":\"文章是否发布\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [(row.article)?_c('span',{style:({color:row.article.isPublished?'green':'red'})},[_vm._v(_vm._s(row.article.isPublished?'已发布':'未发布'))]):_vm._e()]}}])}),_c('el-table-column',{attrs:{\"label\":\"点赞数\",\"prop\":\"thumbupCount\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nvar $index = ref.$index;\nreturn [_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.deleteOne(row.id,$index)}}},[_vm._v(\"删除\")])]}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <panel class>\n    <div class=\"header\">\n      <el-button type=\"danger\" @click=\"sectionDelete\">批量删除</el-button>\n    </div>\n    <el-table @selection-change=\"onSectionChange\" :data=\"dataList\" border>\n      <el-table-column type=\"selection\"></el-table-column>\n      <el-table-column label=\"ID\" prop=\"id\"></el-table-column>\n      <el-table-column label=\"评论内容\">\n        <template v-slot=\"{row}\">\n          <cell-popover :content=\"row.content\"></cell-popover>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"文章标题\" show-overflow-tooltip prop=\"article.title\"></el-table-column>\n      <el-table-column label=\"文章是否发布\">\n        <template v-slot=\"{row}\"><span v-if=\"row.article\" :style=\"{color:row.article.isPublished?'green':'red'}\">{{row.article.isPublished?'已发布':'未发布'}}</span></template>\n      </el-table-column>\n      <el-table-column label=\"点赞数\" prop=\"thumbupCount\"></el-table-column>\n      <el-table-column label=\"操作\">\n        <template v-slot=\"{row,$index}\">\n          <el-button type=\"danger\" size=\"small\" @click=\"deleteOne(row.id,$index)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n  </panel>\n</template>\n<script>\nimport CommentApi from '@/api/comments'\nexport default {\n  data() {\n    return {\n      dataList: [],\n      selectedList: []\n    }\n  },\n  created() {\n    const { articleID } = this.$route.params\n\n    const action = articleID\n      ? CommentApi.fetchArticleCommentList(articleID)\n      : CommentApi.fetchAllCommentList()\n\n    action\n      .then(response => {\n        this.dataList = response\n      })\n      .catch(err => {\n        this.$message.error(err.message)\n      })\n  },\n  methods: {\n    async sectionDelete() {\n      if (!this.selectedList.length) {\n        this.$message.warning('请勾选您要删除的选项')\n        return\n      }\n\n      try {\n        await this.$confirm(\n          '您选中的评论以经删除将无法恢复，是否删除?',\n          '提示',\n          { type: 'warning' }\n        )\n      } catch (err) {\n        return\n      }\n\n      const idList = this.selectedList.map(item => item.id)\n      return CommentApi.deleteMany({ idList })\n        .then(() => {\n          \n          this.selectedList.forEach(item => {\n            const index = this.dataList.indexOf(item)\n            if (index > -1) {\n              this.dataList.splice(index, 1)\n            }\n          })\n        })\n        .catch(err => {\n          Promise.reject(err)\n        })\n    },\n    onSectionChange(selection) {\n      this.selectedList = selection\n    },\n    async deleteOne(id, index) {\n      try {\n        await this.$confirm('此评论以经删除将无法恢复，是否确定？', '提示', {\n          type: 'warning'\n        })\n      } catch (e) {\n        return\n      }\n      CommentApi.deleteOne(id)\n        .then(() => {\n          this.$message.success('删除成功')\n          this.dataList.splice(index, 1)\n        })\n        .catch(err => {\n          this.$message.error(err.message)\n        })\n    }\n  }\n}\n</script>\n\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./List.vue?vue&type=template&id=d079dd1a&\"\nimport script from \"./List.vue?vue&type=script&lang=js&\"\nexport * from \"./List.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}